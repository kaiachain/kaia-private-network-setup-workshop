---
title: "Klaytn Configuration"
date : 2022-09-20T17:44:42+09:00
weight: 20
pre: "<b>B. </b>"
draft: false
---
{{< line_break >}}
>The CN configuration is to create a data directory and set up several values in the configuration file.
* Create the data/log directory.
* Install node key.
* Configure the CN(PN) with `kcnd.conf` (`kpnd.conf`).
  {{< line_break >}}
  {{< line_break >}}


### 1. Data, Log Directory Creation
Considering the fact that the size of Klaytn blockchain data is always increased. {{< line_break >}}
It is recommended to use a big enough storage. You may need to create the directory on your desired path.

{{< line_break >}}

##### 1) CN
{{< highlight html >}}
$ mkdir -p /var/kcnd/data
{{< /highlight >}}
{{< highlight html >}}
$ mkdir -p /var/kcnd/logs
{{< /highlight >}}

##### 2) PN
{{< highlight html >}}
$ mkdir -p /var/kpnd/data
{{< /highlight >}}
{{< highlight html >}}
$ mkdir -p /var/kpnd/logs
{{< /highlight >}}
{{< line_break >}}


### 2. Install Nodekey
> Nodekey is your Private key what you generate with Klay Tool.

![CCN](https://raw.githubusercontent.com/klaytn/klaytn-pre-cypress-setup-workshop/main/static/images/nodekey.png)

In order to operate a node, a `nodekey` is required. The KCN(KPN) binary will create a new one for you if you do not have it. {{< line_break >}}
If you have one, you need to put your `nodekey` into the `data` directory.


{{< highlight html >}}
$ vi /var/kcnd/data/nodekey
{{< /highlight >}}
{{< highlight html >}}
$ cp nodekey /var/kcnd/data
{{< /highlight >}}
Set the PN node in the same way.

{{< line_break >}}
{{< line_break >}}

### 3. Install BLS-Nodekey for CN only
> Nodekey is your Private key what you generate with Klay Tool.

![CN](https://raw.githubusercontent.com/klaytn/klaytn-pre-cypress-setup-workshop/main/static/images/nodekey.png)

In order to operate a node, a `bls-nodekey` is required. The KCN binary will create a new one for you if you do not have it. {{< line_break >}}
If you have one, you need to put your `bls-nodekey` into the `data` directory.


{{< highlight html >}}
$ vi /var/kcnd/data/bls-nodekey
{{< /highlight >}}
{{< highlight html >}}
$ cp bls-nodekey /var/kcnd/data
{{< /highlight >}}


{{< line_break >}}
{{< line_break >}}

### 4. Update the Configuration File
>Configuration File Location:
##### For the archive distribution, the config directory location defaults to `$INSTALL_PATH/kcn-linux-amd64/conf/`.
##### For the package distribution, the config directory defaults to `/etc/kcnd/conf/`.

{{< line_break >}}

##### 1) Add configuration for CN
```vim
# NETWORK=""
NETWORK_ID=6336
DATA_DIR=/var/kcnd/data  # path where you created in #1
LOG_DIR=/var/kcnd/logs # path where you created in #1
NO_DISCOVER=0
BOOTNODES="kni://8e1881cdca97f52a76c6d2683db030f51a34ffc039476b4ed5bc5c757de1b5ce48fea1e53aa182a6ac2b076460881d50d3b57461d1cf36fae777e992893ad485@52.199.8.244:32323?discport=32323&ntype=bn"
REWARDBASE="" # ADD YOUR REWARDS ADDRESS GENERATED BY KEYTOOL
ADDITIONAL="--state.trie-cache-limit 5000 --state.live-pruning"
```
##### 2)  Add configuration for PN
```vim
# NETWORK=""
NETWORK_ID=6336
DATA_DIR=/var/kpnd/data  # path where you created in #1
LOG_DIR=/var/kpnd/logs # path where you created in #1
NO_DISCOVER=1
BOOTNODES=""
ADDITIONAL="--state.trie-cache-limit 5000 --state.live-pruning"
```
{{< line_break >}}
{{< line_break >}}

---
{{< line_break >}}
*You can check the more information for installation on the page below.*
* CN : https://docs.klaytn.foundation/docs/nodes/core-cell/install/install-consensus-nodes/
* PN : https://docs.klaytn.foundation/docs/nodes/core-cell/install/install-proxy-nodes/

{{< line_break >}}
{{< line_break >}}
{{< line_break >}}
If you finish this step, please click the next button ```>``` on the right side of this page.
